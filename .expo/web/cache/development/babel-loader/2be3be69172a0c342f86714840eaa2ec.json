{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport firebase from \"firebase\";\n\nvar Fire = function () {\n  function Fire() {\n    var _this = this;\n\n    _classCallCheck(this, Fire);\n\n    this.init = function () {\n      if (!firebase.apps.length) {\n        firebase.initializeApp({\n          apiKey: \"AIzaSyDMRbIHPNNMmcyyiqshjEgdWDHf0ie3zCg\",\n          authDomain: \"chat-32204.firebaseapp.com\",\n          databaseURL: \"https://chat-32204.firebaseio.com\",\n          projectId: \"chat-32204\",\n          storageBucket: \"chat-32204.appspot.com\",\n          messagingSenderId: \"619108157297\",\n          appId: \"1:619108157297:web:77c7624aa597566c5718d0\",\n          measurementId: \"G-MT0MV4EGEC\"\n        });\n      }\n    };\n\n    this.checkAuth = function () {\n      firebase.auth().onAuthStateChanged(function (user) {\n        if (!user) {\n          firebase.auth().signInAnonymously();\n        }\n      });\n    };\n\n    this.send = function (messages) {\n      messages.forEach(function (item) {\n        var message = {\n          text: item.text,\n          timestamp: firebase.database.ServerValue.TIMESTAMP,\n          user: item.user\n        };\n\n        _this.db.push(message);\n      });\n    };\n\n    this.parse = function (message) {\n      var _message$val = message.val(),\n          user = _message$val.user,\n          text = _message$val.text,\n          timestamp = _message$val.timestamp;\n\n      var _id = message.key;\n      var createdAt = new Date(timestamp);\n      return {\n        _id: _id,\n        createdAt: createdAt,\n        text: text,\n        user: user\n      };\n    };\n\n    this.get = function (callback) {\n      _this.db.on(\"child_added\", function (snapshot) {\n        return callback(_this.parse(snapshot));\n      });\n    };\n\n    this.init();\n    this.checkAuth();\n  }\n\n  _createClass(Fire, [{\n    key: \"off\",\n    value: function off() {\n      this.db.off();\n    }\n  }, {\n    key: \"db\",\n    get: function get() {\n      return firebase.database().ref(\"messages\");\n    }\n  }, {\n    key: \"uid\",\n    get: function get() {\n      return (firebase.auth().currentUser || {}).uid;\n    }\n  }]);\n\n  return Fire;\n}();\n\nexport default new Fire();","map":{"version":3,"sources":["C:/Users/jorge/Desktop/Work/Programming 3/Chat/AwesomeProject/Fire.js"],"names":["firebase","Fire","init","apps","length","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","checkAuth","auth","onAuthStateChanged","user","signInAnonymously","send","messages","forEach","item","message","text","timestamp","database","ServerValue","TIMESTAMP","db","push","parse","val","_id","key","createdAt","Date","get","callback","on","snapshot","off","ref","currentUser","uid"],"mappings":";;AAAA,OAAOA,QAAP,MAAqB,UAArB;;IAEMC,I;AACF,kBAAc;AAAA;;AAAA;;AAAA,SAKdC,IALc,GAKP,YAAM;AACT,UAAI,CAACF,QAAQ,CAACG,IAAT,CAAcC,MAAnB,EAA2B;AACvBJ,QAAAA,QAAQ,CAACK,aAAT,CAAuB;AACnBC,UAAAA,MAAM,EAAE,yCADW;AAEnBC,UAAAA,UAAU,EAAE,4BAFO;AAGnBC,UAAAA,WAAW,EAAE,mCAHM;AAInBC,UAAAA,SAAS,EAAE,YAJQ;AAKnBC,UAAAA,aAAa,EAAE,wBALI;AAMnBC,UAAAA,iBAAiB,EAAE,cANA;AAOnBC,UAAAA,KAAK,EAAE,2CAPY;AAQnBC,UAAAA,aAAa,EAAE;AARI,SAAvB;AAUH;AACJ,KAlBa;;AAAA,SAoBdC,SApBc,GAoBF,YAAM;AACdd,MAAAA,QAAQ,CAACe,IAAT,GAAgBC,kBAAhB,CAAmC,UAAAC,IAAI,EAAI;AACvC,YAAI,CAACA,IAAL,EAAW;AACPjB,UAAAA,QAAQ,CAACe,IAAT,GAAgBG,iBAAhB;AACH;AACJ,OAJD;AAKH,KA1Ba;;AAAA,SA4BdC,IA5Bc,GA4BP,UAAAC,QAAQ,EAAI;AACfA,MAAAA,QAAQ,CAACC,OAAT,CAAiB,UAAAC,IAAI,EAAI;AACrB,YAAMC,OAAO,GAAG;AACZC,UAAAA,IAAI,EAAEF,IAAI,CAACE,IADC;AAEZC,UAAAA,SAAS,EAAEzB,QAAQ,CAAC0B,QAAT,CAAkBC,WAAlB,CAA8BC,SAF7B;AAGZX,UAAAA,IAAI,EAAEK,IAAI,CAACL;AAHC,SAAhB;;AAMA,QAAA,KAAI,CAACY,EAAL,CAAQC,IAAR,CAAaP,OAAb;AACH,OARD;AASH,KAtCa;;AAAA,SAwCdQ,KAxCc,GAwCN,UAAAR,OAAO,EAAI;AAAA,yBACmBA,OAAO,CAACS,GAAR,EADnB;AAAA,UACPf,IADO,gBACPA,IADO;AAAA,UACDO,IADC,gBACDA,IADC;AAAA,UACKC,SADL,gBACKA,SADL;;AAAA,UAEFQ,GAFE,GAEMV,OAFN,CAEPW,GAFO;AAGf,UAAMC,SAAS,GAAG,IAAIC,IAAJ,CAASX,SAAT,CAAlB;AAEA,aAAO;AACHQ,QAAAA,GAAG,EAAHA,GADG;AAEHE,QAAAA,SAAS,EAATA,SAFG;AAGHX,QAAAA,IAAI,EAAJA,IAHG;AAIHP,QAAAA,IAAI,EAAJA;AAJG,OAAP;AAMH,KAnDa;;AAAA,SAqDdoB,GArDc,GAqDR,UAAAC,QAAQ,EAAI;AACd,MAAA,KAAI,CAACT,EAAL,CAAQU,EAAR,CAAW,aAAX,EAA0B,UAAAC,QAAQ;AAAA,eAAIF,QAAQ,CAAC,KAAI,CAACP,KAAL,CAAWS,QAAX,CAAD,CAAZ;AAAA,OAAlC;AACH,KAvDa;;AACV,SAAKtC,IAAL;AACA,SAAKY,SAAL;AACH;;;;0BAsDK;AACF,WAAKe,EAAL,CAAQY,GAAR;AACH;;;wBAEQ;AACL,aAAOzC,QAAQ,CAAC0B,QAAT,GAAoBgB,GAApB,CAAwB,UAAxB,CAAP;AACH;;;wBAES;AACN,aAAO,CAAC1C,QAAQ,CAACe,IAAT,GAAgB4B,WAAhB,IAA+B,EAAhC,EAAoCC,GAA3C;AACH;;;;;;AAGL,eAAe,IAAI3C,IAAJ,EAAf","sourcesContent":["import firebase from \"firebase\";\r\n\r\nclass Fire {\r\n    constructor() {\r\n        this.init();\r\n        this.checkAuth();\r\n    }\r\n\r\n    init = () => {\r\n        if (!firebase.apps.length) {\r\n            firebase.initializeApp({\r\n                apiKey: \"AIzaSyDMRbIHPNNMmcyyiqshjEgdWDHf0ie3zCg\",\r\n                authDomain: \"chat-32204.firebaseapp.com\",\r\n                databaseURL: \"https://chat-32204.firebaseio.com\",\r\n                projectId: \"chat-32204\",\r\n                storageBucket: \"chat-32204.appspot.com\",\r\n                messagingSenderId: \"619108157297\",\r\n                appId: \"1:619108157297:web:77c7624aa597566c5718d0\",\r\n                measurementId: \"G-MT0MV4EGEC\"\r\n            });\r\n        }\r\n    };\r\n\r\n    checkAuth = () => {\r\n        firebase.auth().onAuthStateChanged(user => {\r\n            if (!user) {\r\n                firebase.auth().signInAnonymously();\r\n            }\r\n        });\r\n    };\r\n\r\n    send = messages => {\r\n        messages.forEach(item => {\r\n            const message = {\r\n                text: item.text,\r\n                timestamp: firebase.database.ServerValue.TIMESTAMP,\r\n                user: item.user\r\n            };\r\n\r\n            this.db.push(message);\r\n        });\r\n    };\r\n\r\n    parse = message => {\r\n        const { user, text, timestamp } = message.val();\r\n        const { key: _id } = message;\r\n        const createdAt = new Date(timestamp);\r\n\r\n        return {\r\n            _id,\r\n            createdAt,\r\n            text,\r\n            user\r\n        };\r\n    };\r\n\r\n    get = callback => {\r\n        this.db.on(\"child_added\", snapshot => callback(this.parse(snapshot)));\r\n    };\r\n\r\n    off() {\r\n        this.db.off();\r\n    }\r\n\r\n    get db() {\r\n        return firebase.database().ref(\"messages\");\r\n    }\r\n\r\n    get uid() {\r\n        return (firebase.auth().currentUser || {}).uid;\r\n    }\r\n}\r\n\r\nexport default new Fire();\r\n"]},"metadata":{},"sourceType":"module"}